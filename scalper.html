<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KIRA | SCALPING RADAR v6.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { background: #000; color: #00ff41; font-family: 'JetBrains Mono', monospace; overflow: hidden; }
        .radar-font { font-family: 'Orbitron', sans-serif; }
        .glass-panel { background: rgba(5, 5, 5, 0.95); border: 1px solid #111; backdrop-filter: blur(5px); }
        
        /* Animaci√≥n del Esc√°ner */
        .scanner-line { height: 2px; background: rgba(0, 255, 65, 0.5); width: 100%; position: absolute; box-shadow: 0 0 10px #00ff41; animation: scan 3s linear infinite; }
        @keyframes scan { 0% { top: 0; opacity: 0; } 10% { opacity: 1; } 90% { opacity: 1; } 100% { top: 100%; opacity: 0; } }

        /* Animaci√≥n de Flecha "Entra Aqu√≠" */
        .arrow-anim { animation: pointRight 0.8s infinite alternate; }
        @keyframes pointRight { from { transform: translateX(0); opacity: 0.8; } to { transform: translateX(10px); opacity: 1; } }

        /* Estados de Alerta */
        .alert-box { transition: all 0.3s ease; }
        .blink-bg { animation: bgPulse 1s infinite; }
        @keyframes bgPulse { 0% { background-color: rgba(0,255,65,0.1); } 50% { background-color: rgba(0,255,65,0.3); } 100% { background-color: rgba(0,255,65,0.1); } }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: #1f2937; }
    </style>
</head>
<body class="h-screen flex flex-col p-2 bg-[radial-gradient(circle_at_center,_#051505_0%,_#000_100%)]">

    <nav class="flex bg-[#050505] border-b border-green-900/30 p-2 gap-4 items-center mb-1 shrink-0 z-50">
        <div class="relative group">
            <button class="bg-green-600/20 text-green-400 text-[10px] px-4 py-1 rounded border border-green-500/50 font-bold hover:bg-green-500/30 transition-all uppercase">
                üìÇ M√≥dulos Kira
            </button>
            <div class="absolute left-0 mt-1 w-48 bg-[#0a0a0a] border border-gray-800 rounded shadow-xl hidden group-hover:block z-50">
                <a href="index.html" class="block px-4 py-2 text-[10px] text-blue-400 hover:bg-blue-900/20 border-b border-gray-900 uppercase font-bold">üèõÔ∏è Terminal SMC</a>
                <a href="scalper.html" class="block px-4 py-2 text-[10px] text-green-400 hover:bg-green-900/20 uppercase font-bold">‚ö° Radar Scalper</a>
            </div>
        </div>
        <div class="ml-auto flex items-center gap-2 bg-black/50 px-2 py-1 rounded border border-green-900/20">
            <span class="text-[8px] text-gray-500 font-bold uppercase">DXY Correlation:</span>
            <span id="dxy-val" class="text-[10px] text-white font-bold">---</span>
            <div id="dxy-dot" class="w-2 h-2 rounded-full bg-gray-500 animate-pulse"></div>
        </div>
    </nav>

    <header class="flex justify-between items-center p-3 glass-panel rounded-t-xl border-b border-green-900/30 shrink-0">
        <div class="flex items-center gap-4">
            <div class="relative w-12 h-12 border border-green-900/50 rounded-full flex items-center justify-center overflow-hidden bg-black">
                <div class="scanner-line"></div>
                <span class="text-[9px] radar-font text-green-500 font-black">KIRA</span>
            </div>
            <div>
                <h1 class="text-green-500 font-black text-sm radar-font tracking-widest">SCALPING RADAR <span class="text-white text-[10px]">v6.0</span></h1>
                <p id="server-time" class="text-[8px] text-green-800 font-bold italic uppercase tracking-tighter">ESTABLISHING NEURAL LINK...</p>
            </div>
        </div>
        <div class="text-right">
            <p class="text-[9px] text-gray-600 uppercase font-bold">Current Tick</p>
            <p id="live-price" class="text-2xl font-bold text-white radar-font tracking-wider">0.00000</p>
        </div>
    </header>

    <div class="flex-grow grid grid-cols-1 lg:grid-cols-5 gap-2 mt-2 overflow-hidden pb-2">
        
        <div class="lg:col-span-2 flex flex-col gap-2 h-full overflow-y-auto">
            
            <div id="tactical-panel" class="glass-panel p-4 rounded-lg border border-gray-800 flex flex-col justify-center items-center h-full relative overflow-hidden">
                <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMSIgY3k9IjEiIHI9IjEiIGZpbGw9IiMxMTEiLz48L3N2Zz4=')] opacity-20"></div>

                <div id="scan-mode" class="text-center z-10">
                    <div class="text-green-900 text-4xl mb-2 animate-pulse">üì°</div>
                    <h2 class="text-green-500 radar-font text-lg animate-pulse">SCANNING M1...</h2>
                    <p class="text-[10px] text-gray-600 mt-2">ESPERANDO CONFIRMACI√ìN INSTITUCIONAL</p>
                </div>

                <div id="trade-mode" class="hidden w-full z-10 flex-col gap-3">
                    
                    <div id="order-type-box" class="w-full py-2 text-center rounded border border-gray-700 bg-gray-900 text-gray-400 font-black text-xl radar-font uppercase">
                        ---
                    </div>

                    <div class="flex flex-col gap-1 w-full bg-black/80 border border-gray-800 p-3 rounded-lg relative">
                        
                        <div class="flex justify-between items-center border-b border-gray-900 pb-2 mb-2 opacity-80">
                            <span class="text-[10px] text-green-600 font-bold uppercase">üéØ TAKE PROFIT</span>
                            <span id="target-tp" class="text-lg font-bold text-green-400 radar-font">---</span>
                        </div>

                        <div class="flex justify-between items-center bg-gray-900/50 p-3 rounded border border-gray-700 relative overflow-visible">
                            <div class="flex flex-col">
                                <span class="text-[9px] text-gray-400 font-bold uppercase">PUNTO DE ENTRADA</span>
                                <span id="target-entry" class="text-2xl font-black text-white radar-font">---</span>
                            </div>
                            <div class="flex items-center gap-2 absolute right-[-10px] top-4">
                                <span class="text-[10px] font-bold text-white bg-blue-600 px-2 py-0.5 rounded shadow-lg uppercase tracking-wide">Entra Aqu√≠</span>
                                <span class="text-2xl text-blue-500 arrow-anim">‚óÑ</span>
                            </div>
                        </div>

                        <div class="flex justify-between items-center border-t border-gray-900 pt-2 mt-2 opacity-80">
                            <span class="text-[10px] text-red-600 font-bold uppercase">üõ°Ô∏è STOP LOSS</span>
                            <span id="target-sl" class="text-lg font-bold text-red-400 radar-font">---</span>
                        </div>

                    </div>
                    
                    <p class="text-[9px] text-center text-gray-500 mt-1 uppercase italic">Confirmar con vela de cierre en M1</p>
                </div>
            </div>

            <div class="glass-panel p-2 rounded-lg shrink-0">
                <div class="flex justify-between text-[8px] text-gray-500 font-bold mb-1">
                    <span>OVERSOLD (30)</span>
                    <span id="rsi-val" class="text-white">---</span>
                    <span>OVERBOUGHT (70)</span>
                </div>
                <div class="w-full bg-gray-900 h-2 rounded-full overflow-hidden">
                    <div id="rsi-bar" class="h-full bg-gray-700 transition-all duration-500" style="width: 50%"></div>
                </div>
            </div>
        </div>

        <div class="lg:col-span-3 glass-panel rounded-lg overflow-hidden border border-green-900/20 relative">
            <div id="tradingview_scalp" class="h-full w-full"></div>
            <div class="pointer-events-none absolute inset-0 border-[1px] border-green-500/10 z-10 rounded-lg"></div>
        </div>
    </div>

    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script>
        // Widget M1 para Scalping R√°pido
        new TradingView.widget({
            "autosize": true, "symbol": "FX:EURUSD", "interval": "1", "timezone": "Etc/UTC",
            "theme": "dark", "style": "1", "locale": "es", "toolbar_bg": "#000000",
            "enable_publishing": false, "hide_side_toolbar": false, "container_id": "tradingview_scalp",
            "studies": ["STD;RSI", "STD;Stochastic"] // A√±adido Estoc√°stico para Scalping
        });

        // L√≥gica de Sincronizaci√≥n y UI T√°ctica
        async function syncScalper() {
            try {
                const res = await fetch('https://api.npoint.io/50a3a47c4e1b58827a76?t=' + Date.now());
                const d = await res.json();

                // 1. Datos Generales
                document.getElementById('live-price').innerText = d.p;
                document.getElementById('server-time').innerText = "LINK ESTABLISHED: " + new Date().toLocaleTimeString();
                
                // DXY
                document.getElementById('dxy-val').innerText = d.dxy;
                const dxyDot = document.getElementById('dxy-dot');
                dxyDot.className = d.dxy_t === "BULLISH" ? "w-2 h-2 rounded-full bg-green-500 animate-pulse" : "w-2 h-2 rounded-full bg-red-500 animate-pulse";

                // RSI
                document.getElementById('rsi-val').innerText = d.rsi;
                const rsiBar = document.getElementById('rsi-bar');
                rsiBar.style.width = d.rsi + '%';
                // Color del RSI seg√∫n niveles extremos
                if(d.rsi > 70) rsiBar.className = "h-full bg-red-500 transition-all duration-500";
                else if(d.rsi < 30) rsiBar.className = "h-full bg-green-500 transition-all duration-500";
                else rsiBar.className = "h-full bg-gray-600 transition-all duration-500";

                // 2. L√ìGICA DE TARJETA DE TIRO (HUD)
                const scanMode = document.getElementById('scan-mode');
                const tradeMode = document.getElementById('trade-mode');
                const orderBox = document.getElementById('order-type-box');

                if (d.col === "green" || d.col === "red") {
                    // SE√ëAL DETECTADA: ACTIVAR HUD
                    scanMode.classList.add('hidden');
                    tradeMode.classList.remove('hidden');
                    tradeMode.classList.add('flex');

                    // Llenar datos de la tarjeta
                    document.getElementById('target-entry').innerText = d.p;
                    document.getElementById('target-tp').innerText = d.tp1;
                    document.getElementById('target-sl').innerText = d.sl;

                    // Estilizar seg√∫n Compra o Venta
                    if (d.col === "green") {
                        orderBox.innerText = "üöÄ LONG / COMPRA";
                        orderBox.className = "w-full py-2 text-center rounded border border-green-500 bg-green-900/40 text-green-400 font-black text-xl radar-font uppercase blink-bg shadow-[0_0_20px_rgba(34,197,94,0.3)]";
                    } else {
                        orderBox.innerText = "üîª SHORT / VENTA";
                        orderBox.className = "w-full py-2 text-center rounded border border-red-500 bg-red-900/40 text-red-400 font-black text-xl radar-font uppercase blink-bg shadow-[0_0_20px_rgba(239,68,68,0.3)]";
                    }

                } else {
                    // SIN SE√ëAL: MODO ESC√ÅNER
                    scanMode.classList.remove('hidden');
                    tradeMode.classList.add('hidden');
                    tradeMode.classList.remove('flex');
                }

            } catch (e) { 
                console.log("Offline..."); 
                document.getElementById('server-time').innerText = "CONNECTION LOST - RETRYING...";
            }
        }

        setInterval(syncScalper, 2000); // Actualizaci√≥n m√°s r√°pida para scalping (2s)
        syncScalper();
    </script>
</body>
</html>
